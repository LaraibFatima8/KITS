<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STEM Kits Learning Portal</title>
  <meta name="description" content="Catalog of STEM kits with manuals, guides, FAQs, and resources." />
  <!-- EmailJS CDN -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <style>
    /* ===========================
       CSS RESET + BASE STYLES
       =========================== */
    *, *::before, *::after { box-sizing: border-box; }
    * { margin: 0; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: var(--bg);
      color: var(--text);
      transition: background .3s ease, color .3s ease;
    }
    img { display: block; max-width: 100%; }
    a { color: inherit; text-decoration: none; }
    button { font: inherit; cursor: pointer; }
    :root {
      --bg: #0b1220;
      --surface: #111827;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #8b5cf6; /* violet */
      --accent-2: #22d3ee; /* cyan */
      --card: #0f172a;
      --card-border: #1f2937;
      --ring: #22d3ee55;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }

    /* Theme palettes */
    .theme-ocean { --accent: #22d3ee; --accent-2: #3b82f6; }
    .theme-sunset { --accent: #f97316; --accent-2: #ef4444; }
    .theme-forest { --accent: #34d399; --accent-2: #059669; }
    .theme-neon { --accent: #a78bfa; --accent-2: #22d3ee; }
    .theme-rose  { --accent: #fb7185; --accent-2: #f472b6; }
    .theme-mono-dark { --accent: #9ca3af; --accent-2: #6b7280; }

    /* Animation Keyframes */
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
      100% { transform: translateY(0px); }
    }

    /* Robot Arm Animations */
    @keyframes armMove {
      0% { transform: rotate(0deg); }
      50% { transform: rotate(30deg); }
      100% { transform: rotate(0deg); }
    }

    @keyframes gripperWork {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(0.8); }
    }

    /* Car Animations */
    @keyframes carBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    @keyframes wheelSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes sensorBlink {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    /* Circuit Animations */
    @keyframes circuitPulse {
      0% { stroke-dashoffset: 1000; }
      100% { stroke-dashoffset: 0; }
    }

    @keyframes nodePulse {
      0%, 100% { transform: scale(1); fill-opacity: 0.5; }
      50% { transform: scale(1.5); fill-opacity: 1; }
    }

    /* Gesture Wave Animations */
    @keyframes waveFlow {
      0% { stroke-dashoffset: 100; }
      100% { stroke-dashoffset: -100; }
    }

    /* OLED Display Animations */
    @keyframes pixelScan {
      0% { transform: scaleY(0); }
      100% { transform: scaleY(1); }
    }

    @keyframes textScroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    @keyframes displayGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }

    /* Ultrasonic Sensor Animations */
    @keyframes sonarWave {
      0% { transform: scale(0); opacity: 1; }
      100% { transform: scale(3); opacity: 0; }
    }

    @keyframes sensorRotate {
      0% { transform: rotate(-30deg); }
      100% { transform: rotate(30deg); }
    }

    /* Servo Motor Animation */
    @keyframes servoRotate {
      0% { transform: rotate(0deg); }
      50% { transform: rotate(180deg); }
      100% { transform: rotate(0deg); }
    }

    /* LED Matrix Animation */
    @keyframes ledBlink {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    /* Animated Elements Styles */
    .robo-arm {
      position: absolute;
      top: 20%;
      right: 5%;
      z-index: 1;
    }

    .robo-arm .arm-segment {
      transform-origin: 50px 80px;
      animation: armMove 4s ease-in-out infinite;
    }

    .robo-arm .gripper {
      animation: gripperWork 4s ease-in-out infinite;
    }

    .robo-arm .joint {
      animation: pulse 2s ease-in-out infinite;
    }

    .smart-car {
      position: absolute;
      bottom: 10%;
      left: 5%;
      z-index: 1;
      animation: carBounce 3s ease-in-out infinite;
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,.75);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal.open {
      display: flex;
      animation: modalFadeIn 0.3s ease-out;
    }

    .modal-card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow: auto;
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
    }

    .modal-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: var(--card);
      border-bottom: 1px solid var(--card-border);
      border-radius: var(--radius) var(--radius) 0 0;
    }

    .modal-content {
      padding: 1.5rem;
    }

    .ip-modal-card {
      background: linear-gradient(135deg, #1a1c2c, #4a1c40);
      color: white;
    }

    .ip-modal-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    @keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes modalSlideIn {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .smart-car .wheel {
      transform-origin: center;
      animation: wheelSpin 2s linear infinite;
    }

    .smart-car .sensor-blink {
      animation: sensorBlink 1s ease-in-out infinite;
    }

    .pcb-pattern {
      position: absolute;
      top: 15%;
      left: 10%;
      opacity: 0.5;
      z-index: 1;
    }

    .pcb-pattern .circuit-line {
      stroke-dasharray: 1000;
      animation: circuitPulse 20s linear infinite;
    }

    .pcb-pattern .circuit-node {
      animation: nodePulse 2s ease-in-out infinite;
    }

    .gesture-waves {
      position: absolute;
      bottom: 20%;
      right: 15%;
      z-index: 1;
    }

    .gesture-waves .wave {
      stroke-dasharray: 100;
      animation: waveFlow 3s linear infinite;
    }

    /* OLED Display Styles */
    .oled-display {
      position: absolute;
      right: 5%;
      top: 20px;
      z-index: 1;
    }

    .oled-display .screen {
      animation: displayGlow 2s ease-in-out infinite;
    }

    .oled-display .display-text {
      animation: textScroll 10s linear infinite;
    }

    .pixel-grid rect {
      animation: pixelScan 1s ease-out infinite;
    }

    /* Ultrasonic Sensor Styles */
    .ultrasonic-sensor {
      position: absolute;
      left: 5%;
      top: 30px;
      z-index: 1;
    }

    .ultrasonic-sensor .sensor-body {
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }

    .ultrasonic-sensor .sonar-wave {
      animation: sonarWave 2s ease-out infinite;
    }

    .ultrasonic-sensor .transmitter,
    .ultrasonic-sensor .receiver {
      animation: sensorRotate 4s ease-in-out infinite alternate;
      transform-origin: center;
    }

    /* Servo Motor Styles */
    .servo-motor {
      position: absolute;
      left: 50%;
      top: 40px;
      transform: translateX(-50%);
      z-index: 1;
    }

    .servo-motor .motor-arm {
      transform-origin: bottom center;
      animation: servoRotate 4s ease-in-out infinite;
    }

    /* LED Matrix */
    .led-matrix {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 2px;
      position: absolute;
      right: 10%;
      top: 40px;
    }

    .led {
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
      animation: ledBlink 1s ease-in-out infinite;
    }

    /* Add hover interactions */
    .robo-arm:hover .arm-segment {
      animation-duration: 2s;
    }

    .smart-car:hover {
      transform: scale(1.1);
    }

    .pcb-pattern:hover {
      opacity: 0.8;
    }

    .gesture-waves:hover .wave {
      animation-duration: 1.5s;
    }

    .oled-display:hover .screen {
      animation-duration: 1s;
    }

    .ultrasonic-sensor:hover .sonar-wave {
      animation-duration: 1s;
    }

    .servo-motor:hover .motor-arm {
      animation-duration: 2s;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes glow {
      0% { box-shadow: 0 0 5px rgba(var(--accent-rgb), 0.2); }
      50% { box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.4); }
      100% { box-shadow: 0 0 5px rgba(var(--accent-rgb), 0.2); }
    }

    @keyframes slideIn {
      from { transform: translateX(-30px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* ===========================
       KID-FRIENDLY ANIMATIONS
       =========================== */
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes wiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-3deg); }
      75% { transform: rotate(3deg); }
    }

    @keyframes rainbow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    @keyframes floatUp {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }

    @keyframes colorShift {
      0% { background: var(--accent); }
      33% { background: var(--accent-2); }
      66% { background: #ff6b6b; }
      100% { background: var(--accent); }
    }

    @keyframes sparkle {
      0% { transform: scale(0) rotate(0deg); opacity: 1; }
      50% { transform: scale(1) rotate(180deg); opacity: 0.8; }
      100% { transform: scale(0) rotate(360deg); opacity: 0; }
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Light mode override */
    .light {
      --bg: #f7f8fb;
      --surface: #ffffff;
      --text: #0b1220;
      --muted: #475569;
      --card: #ffffff;
      --card-border: #e5e7eb;
      --shadow: 0 15px 35px rgba(2, 6, 23, .08);
    }

    /* ===========================
       KID-FRIENDLY ENHANCEMENTS
       =========================== */
    
    /* Twinkling Stars Background */
    .star {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
      pointer-events: none;
    }

    .star:nth-child(odd) { animation-delay: -1s; }
    .star:nth-child(3n) { animation-delay: -2s; }

    /* Floating Kit Images */
    .card-media img {
      animation: floatUp 4s ease-in-out infinite;
    }

    .card:nth-child(2n) .card-media img {
      animation-delay: -1s;
    }

    .card:nth-child(3n) .card-media img {
      animation-delay: -2s;
    }

    /* Enhanced Search Bar */
    .search:focus-within {
      transform: scale(1.02);
      animation: bounce 0.6s ease;
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
    }

    /* Rainbow Active Chips */
    .chip.active {
      animation: rainbow 3s linear infinite, pulse 2s infinite;
    }

    /* Bouncing Stats */
    .stat strong {
      animation: heartbeat 2s infinite;
    }

    .stat:nth-child(1) strong { animation-delay: 0s; }
    .stat:nth-child(2) strong { animation-delay: 0.5s; }
    .stat:nth-child(3) strong { animation-delay: 1s; }

    /* Wiggling Theme Buttons */
    .icon-btn:hover {
      animation: wiggle 0.5s ease-in-out;
    }

    /* Enhanced Nav Links */
    .nav-links a {
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      animation: bounce 0.6s ease;
      transform: translateY(-2px);
    }

    /* Magical Card Hovers */
    .card:hover {
      box-shadow: 
        0 20px 50px rgba(0,0,0,.35),
        0 0 20px var(--accent),
        inset 0 1px 0 rgba(255,255,255,0.1);
      animation: colorShift 3s infinite;
    }

    /* Bouncing Back-to-Top */
    .to-top.show {
      animation: bounce 2s infinite;
    }

    /* Typing Effect for Main Heading */
    .typing-text {
      overflow: hidden;
      border-right: 3px solid var(--accent);
      white-space: nowrap;
      animation: typing 3s steps(40, end), blink 1s infinite step-end;
    }

    /* Particle System */
    .particle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: var(--accent-2);
      border-radius: 50%;
      animation: sparkle 4s linear infinite;
      pointer-events: none;
    }

    /* Color-shifting Blobs */
    .blob {
      animation: drift 12s infinite ease-in-out, rainbow 8s linear infinite;
    }

    /* ===========================
       UTILITIES
       =========================== */
    .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .pill { display:inline-flex; align-items:center; gap:.5rem; background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; padding:.35rem .75rem; border-radius:999px; font-weight:600; box-shadow: var(--shadow); }
    .muted { color: var(--muted); }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

    /* ===========================
       NAVBAR
       =========================== */
    .nav {
      position: sticky; top: 0; z-index: 50; backdrop-filter: blur(8px);
      background: color-mix(in oklab, var(--bg), transparent 35%);
      border-bottom: 1px solid var(--card-border);
    }
    .nav-inner { display:flex; align-items:center; justify-content:space-between; gap:16px; height:64px; }
    .brand { display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px; }
    .brand-logo { width:36px; height:36px; border-radius:10px; background: linear-gradient(135deg,var(--accent),var(--accent-2)); box-shadow: var(--shadow); }
    .nav-links { display:flex; gap:16px; flex-wrap:wrap; }
    .nav-links a { padding:8px 12px; border-radius:10px; color: var(--muted); }
    .nav-links a:hover { background: color-mix(in oklab, var(--accent) 15%, transparent); color:#fff; }
    .controls { display:flex; gap:10px; align-items:center; }
    .icon-btn {
      border:1px solid var(--card-border); background: var(--surface); color:var(--text);
      height:38px; width:38px; display:grid; place-items:center; border-radius:12px; box-shadow: var(--shadow);
    }
    .icon-btn:focus { outline: 2px solid var(--ring); outline-offset: 2px; }

    /* ===========================
       HERO SECTION
       =========================== */
    .hero {
      position: relative;
      overflow: hidden;
      padding: 64px 0 40px;
      background:
        radial-gradient(1200px 600px at 10% -20%, color-mix(in oklab, var(--accent) 25%, transparent), transparent),
        radial-gradient(1200px 600px at 110% 120%, color-mix(in oklab, var(--accent-2) 25%, transparent), transparent);
      border-bottom: 1px solid var(--card-border);
      animation: gradientShift 15s ease infinite;
    }
    
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    .blob { position:absolute; filter: blur(40px); opacity:.35; animation: drift 12s infinite ease-in-out; pointer-events:none; }
    .blob.b1 { width:420px; height:420px; background: var(--accent); top:-100px; left:-120px; border-radius:40% 60% 60% 40%/60% 40% 60% 40%; }
    .blob.b2 { width:360px; height:360px; background: var(--accent-2); bottom:-120px; right:-140px; border-radius:60% 40% 40% 60%/40% 60% 40% 60%; animation-delay: -4s; }
    @keyframes drift { 0%{ transform: translateY(0) rotate(0deg);} 50%{ transform: translateY(-20px) rotate(15deg);} 100%{ transform: translateY(0) rotate(0deg);} }

    .hero-grid { display:grid; grid-template-columns: 1.1fr .9fr; gap:28px; align-items:center; }
    @media (max-width: 900px){ .hero-grid { grid-template-columns: 1fr; } }

    .hero h1 { font-size: clamp(1.9rem, 2.5vw + 1rem, 3.2rem); letter-spacing:.2px; }
    .lead { color: var(--muted); margin-top: 10px; }

    .search-wrap { margin-top: 18px; display:flex; gap:12px; flex-wrap: wrap; }
    .search { flex: 1 1 320px; display:flex; align-items:center; gap:10px; padding: 12px 14px; background: var(--surface); border:1px solid var(--card-border); border-radius: 14px; box-shadow: var(--shadow); }
    .search input { all: unset; width:100%; color:var(--text); }
    .search input::placeholder{ color: color-mix(in oklab, var(--muted), white 10%); }
    .filter-chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip { 
      border: 1px solid var(--card-border); 
      background: var(--card); 
      padding: 6px 10px; 
      border-radius: 999px; 
      color: var(--muted); 
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .chip:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      color: var(--text);
    }
    .chip.active { 
      background: linear-gradient(90deg,var(--accent),var(--accent-2)); 
      border-color: transparent; 
      color: #fff; 
      box-shadow: var(--shadow);
      animation: pulse 2s infinite;
    }
    .chip::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      transition: width 0.3s ease, height 0.3s ease;
      opacity: 0;
    }
    .chip:hover::before {
      width: 200%;
      height: 200%;
      opacity: 0.1;
    }

    .hero-card {
      background: linear-gradient(180deg, color-mix(in oklab, var(--surface), black 6%), var(--surface));
      border:1px solid var(--card-border); border-radius: var(--radius); padding:18px; box-shadow: var(--shadow);
    }
    .stats { display:grid; grid-template-columns: repeat(3,1fr); gap:14px; margin-top: 12px; }
    .stat { 
      background: var(--card); 
      border: 1px solid var(--card-border); 
      border-radius: 14px; 
      padding: 12px; 
      text-align: center;
      transition: all 0.3s ease;
      animation: float 6s ease-in-out infinite;
    }
    .stat:nth-child(2) {
      animation-delay: -2s;
    }
    .stat:nth-child(3) {
      animation-delay: -4s;
    }
    .stat:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .stat strong { 
      display: block; 
      font-size: 1.4rem;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: pulse 2s infinite;
    }

    /* ===========================
       SECTIONS HEADERS
       =========================== */
    .section { padding: 44px 0; }
    .section h2 { font-size: clamp(1.4rem, 1.2vw + 1rem, 2rem); margin-bottom: 6px; }
    .section .sub { color: var(--muted); margin-bottom: 20px; }

    /* ===========================
       KITS GRID
       =========================== */
    .grid { display:grid; grid-template-columns: repeat(12, 1fr); gap: 18px; }
    .col-4 { grid-column: span 4; }
    @media (max-width: 1000px){ .col-4 { grid-column: span 6; } }
    @media (max-width: 640px){ .col-4 { grid-column: span 12; } }

    .card { 
      position: relative; 
      background: var(--card); 
      border: 1px solid var(--card-border); 
      border-radius: var(--radius); 
      overflow: hidden; 
      box-shadow: var(--shadow); 
      transform: translateZ(0); 
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: scaleIn 0.5s ease-out;
    }
    .card:hover { 
      transform: translateY(-10px) scale(1.02); 
      box-shadow: 0 20px 50px rgba(0,0,0,.35);
    }
    .card-media { 
      height: 180px; 
      background: linear-gradient(135deg, color-mix(in oklab, var(--accent) 20%, black), color-mix(in oklab, var(--accent-2) 20%, black)); 
      display: grid; 
      place-items: center; 
      position: relative;
      overflow: hidden;
    }
    .card-media::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(
        to right,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
      );
      transform: skewX(-25deg);
      transition: 0.75s;
    }
    .card:hover .card-media::after {
      left: 150%;
    }
    .card-media img { 
      height: 100%; 
      width: 100%; 
      object-fit: contain; 
      mix-blend-mode: screen; 
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.5));
      transition: transform 0.3s ease-in-out;
    }
    .card:hover .card-media img {
      transform: scale(1.1) rotate(2deg);
    }
    .card-body { padding: 14px; }
    .card-title { font-weight: 800; letter-spacing:.2px; }
    .card-tags { display:flex; gap:8px; flex-wrap:wrap; margin: 10px 0 6px; }
    .tag { font-size:.78rem; color:var(--muted); border:1px dashed var(--card-border); padding:4px 8px; border-radius:999px; }
    .card-actions { display:flex; gap:10px; }
    .btn.secondary {
      background: #4b5563;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
      text-decoration: none;
      font-size: 14px;
    }
    .btn.secondary:hover {
      background: #374151;
    }
    .btn { 
      display: inline-flex; 
      align-items: center; 
      gap: 8px; 
      padding: 10px 12px; 
      border-radius: 12px; 
      border: 1px solid var(--card-border); 
      background: var(--surface); 
      color: var(--text); 
      box-shadow: var(--shadow);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .btn:active {
      transform: translateY(1px);
    }
    .btn.primary { 
      background: linear-gradient(90deg,var(--accent),var(--accent-2)); 
      border-color: transparent; 
      color: #fff;
    }
    .btn.primary:hover {
      background: linear-gradient(90deg,var(--accent-2),var(--accent));
    }
    .btn.primary::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
      transform: scale(0);
      opacity: 0;
      transition: transform 0.6s, opacity 0.6s;
    }
    .btn.primary:hover::after {
      transform: scale(1);
      opacity: 1;
    }
    .btn.ghost { 
      background: transparent;
      border: 1px solid var(--accent);
      position: relative;
      z-index: 1;
    }
    .btn.ghost::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      transition: width 0.3s ease;
      z-index: -1;
    }
    .btn.ghost:hover {
      color: #fff;
      border-color: transparent;
    }
    .btn.ghost:hover::before {
      width: 100%;
    }
    .btn:focus { 
      outline: 2px solid var(--ring); 
      outline-offset: 2px; 
    }

    /* Tilt hover */
    .tilt:hover { transform: perspective(800px) rotateX(2deg) rotateY(-2deg) translateY(-6px); }

    /* ===========================
       HOW-IT-WORKS, FEATURES
       =========================== */
    .steps { display:grid; grid-template-columns: repeat(4,1fr); gap: 16px; }
    @media (max-width: 900px){ .steps { grid-template-columns: repeat(2,1fr); } }
    @media (max-width: 560px){ .steps { grid-template-columns: 1fr; } }
    .step { background: var(--card); border:1px solid var(--card-border); border-radius: 14px; padding:14px; }
    .step .num { font-weight:900; background: linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip: text; background-clip:text; color: transparent; font-size: 2rem; }

    .features { display:grid; grid-template-columns: repeat(3,1fr); gap: 16px; }
    @media (max-width: 900px){ .features { grid-template-columns: 1fr; } }
    .feature { display:flex; gap:12px; background: var(--card); border:1px solid var(--card-border); border-radius: 14px; padding:14px; align-items:flex-start; }
    .feature .dot { width:14px; height:14px; border-radius:50%; background: linear-gradient(90deg,var(--accent),var(--accent-2)); box-shadow: var(--shadow); margin-top: 6px; }

    /* ===========================
       FAQ
       =========================== */
    .faq { display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 900px){ .faq { grid-template-columns: 1fr; } }
    .qa { background: var(--card); border:1px solid var(--card-border); border-radius: 14px; padding: 14px; }
    .qa summary { font-weight:700; cursor:pointer; list-style:none; }
    .qa summary::-webkit-details-marker { display:none; }
    .qa[open] { outline: 2px solid var(--ring); }

    /* ===========================
       MODAL
       =========================== */
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; padding:20px; }
    .modal.open { display:flex; }
    .modal-card { width: min(760px, 96vw); background: var(--surface); border:1px solid var(--card-border); border-radius: 16px; box-shadow: var(--shadow); overflow:hidden; }
    .modal-head { display:flex; align-items:center; justify-content:space-between; gap:10px; padding:14px 16px; border-bottom:1px solid var(--card-border); }
    .modal-body { padding:16px; display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    .modal-actions { display:flex; gap:10px; padding:14px 16px; border-top:1px solid var(--card-border); background: var(--card); }
    @media (max-width: 720px){ .modal-body { grid-template-columns: 1fr; } }

    /* ===========================
       CONTACT
       =========================== */
    .contact { display:grid; grid-template-columns: 1.2fr .8fr; gap:16px; }
    @media (max-width: 900px){ .contact { grid-template-columns: 1fr; } }
    .input { width: 100%; padding: 12px 12px; border-radius: 12px; border:1px solid var(--card-border); background: var(--surface); color: var(--text); }

    /* ===========================
       FOOTER
       =========================== */
    footer { border-top:1px solid var(--card-border); padding:20px 0 40px; color: var(--muted); }
    .foot { display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }

    /* Back-to-top */
    .to-top { position: fixed; right: 18px; bottom: 18px; height:46px; width:46px; border-radius: 12px; display:grid; place-items:center; background: linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; box-shadow: var(--shadow); border:0; opacity:0; pointer-events:none; transform: translateY(10px); transition: .25s ease; }
    .to-top.show { opacity:1; pointer-events:auto; transform: translateY(0); }

    /* Motion Sensor Styles */
    .motion-sensor {
      position: absolute;
      right: 10%;
      top: 60px;
      z-index: 1;
    }

    .motion-sensor .sensor-range {
      animation: sensorPulse 3s ease-out infinite;
      opacity: 0;
    }

    .motion-sensor .sensor-range:nth-child(2) {
      animation-delay: -1s;
    }

    .motion-sensor .sensor-range:nth-child(3) {
      animation-delay: -2s;
    }

    .motion-sensor .sensor-dot {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes sensorPulse {
      0% { transform: scale(0.8); opacity: 1; }
      100% { transform: scale(1.2); opacity: 0; }
    }

    /* Digital Display Styles */
    .digital-display {
      position: absolute;
      left: 10%;
      top: 80px;
      z-index: 1;
    }

    .digital-display .display-value {
      font-family: monospace;
      font-size: 14px;
      animation: textBlink 2s ease-in-out infinite;
    }

    @keyframes textBlink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Interactive Circuit Styles */
    .interactive-circuit {
      position: absolute;
      left: 5%;
      top: 30px;
      z-index: 1;
    }

    .interactive-circuit .resistor {
      animation: componentPulse 3s ease-in-out infinite;
    }

    .interactive-circuit .led-component {
      animation: ledGlow 2s ease-in-out infinite;
    }

    .interactive-circuit .connection-line {
      stroke-dasharray: 10;
      animation: lineFlow 20s linear infinite;
    }

    @keyframes componentPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes ledGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.5) drop-shadow(0 0 5px var(--accent-2)); }
    }

    @keyframes lineFlow {
      from { stroke-dashoffset: 1000; }
      to { stroke-dashoffset: 0; }
    }

    /* Microcontroller Styles */
    .microcontroller {
      position: absolute;
      right: 5%;
      top: 40px;
      z-index: 1;
    }

    .microcontroller .processing-ring {
      animation: processSpin 4s linear infinite;
    }

    .microcontroller .pins-left rect,
    .microcontroller .pins-right rect {
      animation: pinPulse 1s ease-in-out infinite;
      animation-delay: var(--delay);
    }

    @keyframes processSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes pinPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    /* Nice focus outline */
    :focus-visible { outline: 2px solid var(--ring); outline-offset: 2px; border-radius: 10px; }
  </style>
</head>

<body class="theme-neon dark">
  <!-- =========================== NAVBAR =========================== -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#home" aria-label="Go to top">
        <span class="brand-logo"></span>
        <span>STEM Kits</span>
      </a>
      <div class="nav-links">
        <a href="#kits">Kits</a>
        <a href="#how">How it works</a>
        <a href="#faq">FAQ</a>
        <a href="robotic-arm-manual.html" target="_blank">Robotic Arm Manual</a>
        <a href="#resources">Resources</a>
        <a href="#contact">Contact</a>
      </div>
      <div class="controls">
        <button class="icon-btn" id="themeBtn" title="Toggle light/dark" aria-label="Toggle light or dark theme">ðŸŒ—</button>
        <button class="icon-btn" id="paletteBtn" title="Cycle color theme" aria-label="Change color theme">ðŸŽ¨</button>
      </div>
    </div>
  </nav>

  <!-- =========================== HERO =========================== -->
  <header id="home" class="hero">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <!-- Animated Robot Arm -->
    <div class="robo-arm">
      <svg viewBox="0 0 100 100" width="120" height="120">
        <g class="arm-base">
          <rect x="45" y="80" width="10" height="20" fill="var(--accent)" />
          <circle cx="50" cy="80" r="8" fill="var(--accent-2)" class="joint" />
        </g>
        <g class="arm-segment">
          <line x1="50" y1="80" x2="50" y2="50" stroke="var(--accent)" stroke-width="6" />
          <circle cx="50" cy="50" r="6" fill="var(--accent-2)" class="joint" />
        </g>
        <g class="forearm">
          <line x1="50" y1="50" x2="70" y2="30" stroke="var(--accent)" stroke-width="4" />
          <circle cx="70" cy="30" r="4" fill="var(--accent-2)" class="joint" />
        </g>
        <g class="gripper">
          <path d="M65 30 L75 30 L80 25" stroke="var(--accent-2)" stroke-width="3" fill="none" />
          <path d="M65 30 L75 30 L80 35" stroke="var(--accent-2)" stroke-width="3" fill="none" />
        </g>
      </svg>
    </div>
    <!-- Animated Car -->
    <div class="smart-car">
      <svg viewBox="0 0 120 60" width="100" height="50">
        <g class="car-body">
          <rect x="20" y="30" width="80" height="20" rx="5" fill="var(--accent)" />
          <path d="M30 30 L40 15 L80 15 L90 30" fill="var(--accent)" />
          <rect x="45" y="20" width="30" height="12" rx="2" fill="var(--accent-2)" class="windshield" />
        </g>
        <g class="wheels">
          <circle cx="35" cy="50" r="8" fill="var(--accent-2)" class="wheel" />
          <circle cx="85" cy="50" r="8" fill="var(--accent-2)" class="wheel" />
          <circle cx="35" cy="50" r="3" fill="var(--card)" />
          <circle cx="85" cy="50" r="3" fill="var(--card)" />
        </g>
        <g class="sensors">
          <circle cx="100" cy="35" r="2" fill="var(--accent-2)" class="sensor-blink" />
          <circle cx="20" cy="35" r="2" fill="var(--accent-2)" class="sensor-blink" />
        </g>
      </svg>
    </div>
    <!-- PCB Circuit Pattern -->
    <div class="pcb-pattern">
      <svg viewBox="0 0 100 100" width="150" height="150">
        <g class="circuit-paths">
          <path d="M10 10 H90 V90 H10 Z" fill="none" stroke="var(--accent)" stroke-width="1" class="circuit-line" />
          <path d="M20 20 H80 V80 H20 Z" fill="none" stroke="var(--accent-2)" stroke-width="1" class="circuit-line" />
          <circle cx="10" cy="10" r="3" fill="var(--accent-2)" class="circuit-node" />
          <circle cx="90" cy="10" r="3" fill="var(--accent-2)" class="circuit-node" />
          <circle cx="10" cy="90" r="3" fill="var(--accent-2)" class="circuit-node" />
          <circle cx="90" cy="90" r="3" fill="var(--accent-2)" class="circuit-node" />
          <path d="M10 50 H90" stroke="var(--accent)" stroke-width="1" class="circuit-line" />
          <path d="M50 10 V90" stroke="var(--accent-2)" stroke-width="1" class="circuit-line" />
        </g>
      </svg>
    </div>
    <!-- Gesture Sensor Waves -->
    <div class="gesture-waves">
      <svg viewBox="0 0 100 50" width="80" height="40">
        <g class="waves">
          <path d="M10 25 Q25 10 50 25 Q75 40 90 25" fill="none" stroke="var(--accent)" stroke-width="2" class="wave" />
          <path d="M10 25 Q25 40 50 25 Q75 10 90 25" fill="none" stroke="var(--accent-2)" stroke-width="2" class="wave" />
        </g>
      </svg>
    </div>
    <div class="container hero-grid">
      <div class="hero-content">
        <style>
          .hero-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
          }
          
          .pill {
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1.5rem;
            border-radius: 100px;
            font-size: clamp(0.875rem, 2vw, 1.125rem);
            display: inline-block;
            margin-bottom: 0.5rem;
          }
          
          .hero-content h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            line-height: 1.2;
            margin: 0;
            letter-spacing: -0.02em;
          }
          
          .gradient-text {
            background: linear-gradient(90deg,var(--accent),var(--accent-2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline;
          }
          
          .lead {
            font-size: clamp(1rem, 1.5vw, 1.25rem);
            color: var(--muted);
            max-width: 600px;
            margin: 0;
          }

          @media (max-width: 768px) {
            .hero-content {
              text-align: center;
              padding: 0 1rem;
            }
            .hero-content h1 {
              font-size: clamp(1.75rem, 4vw, 2.5rem);
            }
            .lead {
              font-size: clamp(0.875rem, 3vw, 1rem);
            }
          }
        </style>
        <span class="pill">Build â€¢ Learn â€¢ Innovate</span>
        <h1>Welcome to Your <span class="gradient-text">STEM Adventure</span>!</h1>
        <p class="lead">Embark on an exciting journey of discovery with our interactive STEM kits. Each kit is a gateway to hands-on learning, where you'll build amazing projects, understand core concepts, and unleash your creativity. Let's start building the future, one project at a time! ðŸš€</p>

        <div class="search-wrap" aria-label="Search and filters">
          <label class="search" aria-label="Search kits">
            ðŸ”Ž
            <input id="searchInput" type="search" placeholder="Search kits: car, solar, sensor, Arduinoâ€¦" />
          </label>
          <div class="filter-chips" id="chips">
            <button class="chip active" data-filter="all">All</button>
            <button class="chip" data-filter="beginner">Beginner</button>
            <button class="chip" data-filter="intermediate">Intermediate</button>
            <button class="chip" data-filter="advanced">Advanced</button>
            <button class="chip" data-filter="electronics">Electronics</button>
            <button class="chip" data-filter="robotics">Robotics</button>
            <button class="chip" data-filter="automation">Automation</button>
            <button class="chip" data-filter="sensors">Sensors</button>
            <button class="chip" data-filter="coding">Coding</button>
          </div>
        </div>
      </div>

      <div class="hero-card">
        <div class="stats">
          <div class="stat"><strong id="statKits">12</strong><span class="muted">Kits</span></div>
          <div class="stat"><strong>âˆž</strong><span class="muted">Ideas</span></div>
          <div class="stat"><strong>QR</strong><span class="muted">ready</span></div>
        </div>
      </div>
    </div>
  </header>

  <!-- =========================== KITS =========================== -->
  <section id="kits" class="section">
    <div class="container">
      <!-- LED Matrix Display -->
      <div class="led-matrix">
        <script>
          // Create LED matrix dynamically
          document.addEventListener('DOMContentLoaded', () => {
            const matrix = document.querySelector('.led-matrix');
            for(let i = 0; i < 64; i++) {
              const led = document.createElement('div');
              led.className = 'led';
              led.style.animationDelay = `${Math.random() * 2}s`;
              matrix.appendChild(led);
            }
          });
        </script>
      </div>

      <!-- Motion Sensor -->
      <div class="motion-sensor">
        <svg viewBox="0 0 80 80" width="80" height="80">
          <circle cx="40" cy="40" r="35" fill="none" stroke="var(--accent)" stroke-width="2" class="sensor-range" />
          <circle cx="40" cy="40" r="25" fill="none" stroke="var(--accent)" stroke-width="2" class="sensor-range" />
          <circle cx="40" cy="40" r="15" fill="none" stroke="var(--accent)" stroke-width="2" class="sensor-range" />
          <circle cx="40" cy="40" r="5" fill="var(--accent-2)" class="sensor-dot" />
        </svg>
      </div>

      <h2>Browse Kits</h2>
      <p class="sub">Click a kit card to preview, then open the PDF manual or watch assembly steps.</p>

      <div class="grid" id="grid">
        <!-- Cards injected by JS -->
      </div>
    </div>
  </section>

  <!-- =========================== HOW IT WORKS =========================== -->
  <section id="how" class="section" style="border-top:1px solid var(--card-border)">
    <div class="container">
      <!-- Animated OLED Display -->
      <div class="oled-display">
        <svg viewBox="0 0 120 60" width="120" height="60">
          <rect x="10" y="5" width="100" height="50" rx="2" fill="var(--card)" class="display-body" />
          <rect x="15" y="10" width="90" height="40" fill="var(--accent-2)" class="screen" />
          <!-- Scrolling Text -->
          <text x="60" y="35" fill="var(--card)" class="display-text" text-anchor="middle">STEM KITS</text>
          <!-- Pixel Grid -->
          <g class="pixel-grid"></g>
        </svg>
      </div>

      <!-- Ultrasonic Sensor -->
      <div class="ultrasonic-sensor">
        <svg viewBox="0 0 100 50" width="100" height="50">
          <rect x="20" y="10" width="60" height="30" rx="5" fill="var(--accent)" class="sensor-body" />
          <!-- Transmitter -->
          <circle cx="35" cy="25" r="8" fill="var(--accent-2)" class="transmitter" />
          <!-- Receiver -->
          <circle cx="65" cy="25" r="8" fill="var(--accent-2)" class="receiver" />
          <!-- Sonar Waves -->
          <circle cx="35" cy="25" r="5" fill="none" stroke="var(--accent-2)" class="sonar-wave" />
          <circle cx="35" cy="25" r="5" fill="none" stroke="var(--accent-2)" class="sonar-wave" style="animation-delay: -1s" />
          <circle cx="35" cy="25" r="5" fill="none" stroke="var(--accent-2)" class="sonar-wave" style="animation-delay: -2s" />
        </svg>
      </div>

      <!-- Servo Motor -->
      <div class="servo-motor">
        <svg viewBox="0 0 60 60" width="60" height="60">
          <rect x="10" y="10" width="40" height="40" fill="var(--accent)" class="motor-body" />
          <circle cx="30" cy="30" r="15" fill="var(--accent-2)" class="motor-hub" />
          <rect x="28" y="15" width="4" height="15" fill="var(--card)" class="motor-arm" />
        </svg>
      </div>

      <h2>How it works</h2>
      <p class="sub">Three simple steps from box to build.</p>
      <div class="steps">
        <div class="step">
          <div class="num">01</div>
          <h3>Scan the QR</h3>
          <p class="muted">Each box has a QR that opens this portal. No logins, no appsâ€”just the manuals.</p>
        </div>
        <div class="step">
          <div class="num">02</div>
          <h3>Pick your kit</h3>
          <p class="muted">Use search & filters to find your exact kit version. Click to open the quick preview.</p>
        </div>
        <div class="step">
          <div class="num">03</div>
          <h3>Build & explore</h3>
          <p class="muted">Follow the PDF or watch the step list. Try the bonus extensions at the end!</p>
        </div>
        <div class="step">
          <div class="num">04</div>
          <h3>Share progress</h3>
          <p class="muted">Teachers can print the checklist. Students can submit photos or timings via the contact form.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================== FEATURES =========================== -->
  <section class="section" id="resources" style="border-top:1px solid var(--card-border)">
    <div class="container">
      <!-- Interactive Circuit Board -->
      <div class="interactive-circuit">
        <svg viewBox="0 0 200 100" width="200" height="100">
          <g class="circuit-components">
            <!-- Resistors -->
            <rect x="20" y="40" width="30" height="10" fill="var(--accent)" class="resistor" />
            <rect x="80" y="40" width="30" height="10" fill="var(--accent)" class="resistor" />
            <!-- LEDs -->
            <circle cx="140" cy="45" r="8" fill="var(--accent-2)" class="led-component" />
            <circle cx="170" cy="45" r="8" fill="var(--accent-2)" class="led-component" />
            <!-- Connection Lines -->
            <path d="M10 45 H190" stroke="var(--accent)" stroke-width="2" class="connection-line" />
            <path d="M50 45 V70" stroke="var(--accent)" stroke-width="2" class="connection-line" />
            <path d="M110 45 V70" stroke="var(--accent)" stroke-width="2" class="connection-line" />
          </g>
        </svg>
      </div>

      <!-- Animated Microcontroller -->
      <div class="microcontroller">
        <svg viewBox="0 0 150 150" width="150" height="150">
          <rect x="25" y="25" width="100" height="100" rx="10" fill="var(--accent)" class="chip-body" />
          <!-- Pins -->
          <g class="pins-left">
            <rect x="15" y="35" width="10" height="5" fill="var(--accent-2)" />
            <rect x="15" y="45" width="10" height="5" fill="var(--accent-2)" />
            <rect x="15" y="55" width="10" height="5" fill="var(--accent-2)" />
          </g>
          <g class="pins-right">
            <rect x="125" y="35" width="10" height="5" fill="var(--accent-2)" />
            <rect x="125" y="45" width="10" height="5" fill="var(--accent-2)" />
            <rect x="125" y="55" width="10" height="5" fill="var(--accent-2)" />
          </g>
          <!-- Processing Animation -->
          <circle cx="75" cy="75" r="30" fill="none" stroke="var(--accent-2)" stroke-width="2" class="processing-ring" />
        </svg>
      </div>

      <h2>Extras & Resources</h2>
      <p class="sub">Everything to make learning fun and structured.</p>
      <div class="features">
        <div class="feature">
          <span class="dot"></span>
          <div>
            <h3>Printable Checklists</h3>
            <p class="muted">Each manual includes a one-page build checklist at the endâ€”great for classrooms.</p>
          </div>
        </div>
        <div class="feature">
          <span class="dot"></span>
          <div>
            <h3>Spare Parts Links</h3>
            <p class="muted">Common parts and alternatives listed for easy replacement and upgrades.</p>
          </div>
        </div>
        <div class="feature">
          <span class="dot"></span>
          <div>
            <h3>Extensions</h3>
            <p class="muted">Turn each kit into a mini projectâ€”add sensors, code challenges, or design tweaks.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================== FAQ =========================== -->
  <section id="faq" class="section" style="border-top:1px solid var(--card-border)">
    <div class="container">
      <h2>FAQ</h2>
      <p class="sub">Common questions from students, parents, and teachers.</p>
      <div class="faq">
        <details class="qa">
          <summary>Do I need to install any app?</summary>
          <div class="muted">No. Manuals open in your browser as PDFs. Everything is mobile-friendly.</div>
        </details>
        <details class="qa">
          <summary>Can I use these in a classroom?</summary>
          <div class="muted">Yesâ€”print the checklist pages and use the timing boxes for assessments.</div>
        </details>
        <details class="qa">
          <summary>What if a link is broken?</summary>
          <div class="muted">Use the contact form below to report it. We'll update the manual and email you the fix.</div>
        </details>
        <details class="qa">
          <summary>Are there video tutorials?</summary>
          <div class="muted">Some kits have short clips embedded as QR links inside the PDF. More coming soon!</div>
        </details>
      </div>
    </div>
  </section>

  <!-- =========================== CONTACT =========================== -->
  <section id="contact" class="section" style="border-top:1px solid var(--card-border)">
    <div class="container contact">
      <div>
        <h2>Contact & Feedback</h2>
        <p class="sub">Found an issue? Want to suggest a new kit? Tell us!</p>
        <form id="contactForm">
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:10px 0;">
            <input class="input" type="text" name="user_name" placeholder="Your name" required />
            <input class="input" type="email" name="user_email" placeholder="Email" required />
          </div>
          <textarea class="input" name="message" rows="5" placeholder="Message" required></textarea>
          <div style="margin-top:10px; display:flex; gap:10px; align-items:center;">
            <button class="btn primary" type="submit" id="submitBtn">
              <span id="btnText">Send Message</span>
              <span id="spinner" style="display:none;">ðŸ“¤ Sending...</span>
            </button>
            <button class="btn" type="reset">Reset</button>
            <div id="formStatus" style="margin-left:10px; font-weight:bold;"></div>
          </div>
        </form>
      </div>
      <div>
        <div class="step">
          <div class="num">Tip</div>
          <h3>QR on every box</h3>
          <p class="muted">Print one QR that points to this portal. Inside each kit, also print just its direct manual link for quick access.</p>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn" href="#kits">Go to Kits</a>
            <a class="btn ghost" href="#faq">Read FAQ</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================== FOOTER =========================== -->
  <footer>
    <div class="container foot">
      <div>Â© <span id="year"></span> STEM Kits â€” Built for curious minds.</div>
      <div style="display:flex; gap:10px; align-items:center;">
        <a class="pill" href="#home" aria-label="Back to top">â¬†ï¸ Top</a>
      </div>
    </div>
  </footer>

  <!-- Back to top floating button -->
  <button class="to-top" id="toTop" aria-label="Back to top">â†‘</button>

    <!-- =========================== MODAL =========================== -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <strong id="modalTitle">Kit</strong>
        <button class="icon-btn" id="modalClose" aria-label="Close">âœ–</button>
      </div>
      <div class="modal-body">
        <div>
          <div class="card-media" style="height:220px"><img id="modalImg" alt="Kit preview" /></div>
        </div>
        <div>
          <div style="margin-bottom:8px; font-weight:700">What you'll build</div>
          <ul id="modalSteps" class="muted" style="display:grid; gap:6px; padding-left: 18px; list-style: decimal"></ul>
          <div class="card-tags" id="modalTags"></div>
        </div>
      </div>
      <div class="modal-actions">
        <a class="btn primary" id="openManual" target="_blank" rel="noopener">ðŸ“˜ Open PDF Manual</a>
        <a class="btn" id="openExtras" target="_blank" rel="noopener">ðŸ§ª Bonus Experiments</a>
        <button class="btn glow-effect" id="openController" style="display: none;">ðŸ”Œ Connect to Car</button>
      </div>
    </div>
  </div>

  <!-- IP Address Modal -->
  <div class="modal" id="ipModal">
    <div class="modal-card ip-modal-card">
      <div class="modal-head">
        <strong>Connect to 4WD Car</strong>
        <button class="icon-btn" id="ipModalClose">âœ–</button>
      </div>
      <div class="modal-content ip-modal-content">
        <style>
          .ip-modal-card {
            background: linear-gradient(135deg, #1a1c2c, #4a1c40);
        border-radius: 15px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        animation: slideDown 0.5s ease-out;
      }

      @keyframes slideDown {
        from { transform: translateY(-20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      .ip-input-container {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .ip-input {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 8px;
        background: rgba(255,255,255,0.1);
        color: #fff;
        font-size: 16px;
        transition: all 0.3s ease;
        animation: glow 2s infinite;
      }

      .ip-input:focus {
        outline: none;
        box-shadow: 0 0 15px rgba(82,168,236,0.6);
      }

      @keyframes glow {
        0%, 100% { box-shadow: 0 0 5px rgba(82,168,236,0.3); }
        50% { box-shadow: 0 0 20px rgba(82,168,236,0.6); }
      }

      .connect-btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        background: linear-gradient(45deg, #00b4db, #0083b0);
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .connect-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,180,219,0.4);
      }

      .connect-btn:active {
        transform: translateY(0);
      }

      .status-indicator {
        text-align: center;
        margin: 10px 0;
        padding: 8px;
        border-radius: 6px;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        animation: fadeIn 0.3s ease-out;
      }

      .status-disconnected {
        background: rgba(255,255,255,0.1);
        color: #fff;
      }

      .status-connected {
        background: rgba(72,187,120,0.2);
        color: #4ade80;
      }

      .status-error {
        background: rgba(239,68,68,0.2);
        color: #f87171;
      }

      .monitor-container {
        margin-top: 20px;
        padding: 15px;
        background: rgba(0,0,0,0.3);
        border-radius: 8px;
      }

      .monitor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        color: #fff;
      }

      .clear-btn {
        background: none;
        border: none;
        color: #60a5fa;
        cursor: pointer;
        font-size: 14px;
        transition: color 0.3s ease;
      }

      .clear-btn:hover {
        color: #93c5fd;
      }

      #receivedData {
        width: 100%;
        height: 150px;
        padding: 10px;
        border: none;
        border-radius: 6px;
        background: #1a1c2c;
        color: #a5f3fc;
        font-family: monospace;
        resize: none;
        line-height: 1.5;
      }

      #receivedData::placeholder {
        color: rgba(165,243,252,0.5);
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes rainbow {
        0% { border-color: #ff0000; }
        17% { border-color: #ff8000; }
        33% { border-color: #ffff00; }
        50% { border-color: #00ff00; }
        67% { border-color: #0000ff; }
        83% { border-color: #8000ff; }
        100% { border-color: #ff0000; }
      }
    </style>

    <div class="ip-input-container">
      <input type="text" id="ipAddress" class="ip-input" 
             placeholder="Enter Kit IP Address (e.g., 192.168.4.1)" value="192.168.4.1">
      <button id="connectBtn" class="connect-btn">Connect</button>
    </div>
    
    <div id="connectionStatus" class="status-indicator status-disconnected">
      Not connected
    </div>

    <div class="monitor-container">
      <div class="monitor-header">
        <span>Serial Monitor</span>
        <button id="clearBtn" class="clear-btn">Clear</button>
      </div>
      <textarea id="receivedData" readonly 
                placeholder="Connection logs will appear here..."></textarea>
    </div>
        <!DOCTYPE html>
        <div class="flex flex-col items-center justify-center min-h-screen p-4">
            <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl">
                <h1 class="text-3xl font-extrabold text-gray-900 mb-6 text-center">ðŸ¤– Microcontroller Car Control ðŸš—</h1>

                <!-- Connection Section -->
                <div class="mb-8 p-6 bg-blue-50 rounded-lg border border-blue-200">
                    <h2 class="text-2xl font-bold text-blue-700 mb-4 text-center">Connection Status</h2>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button id="connectButton" class="flex-1 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">
                            Connect to Microcontroller
                        </button>
                        <button id="disconnectButton" disabled class="flex-1 px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600">
                            Disconnect
                        </button>
                    </div>
                    <p id="statusMessage" class="mt-4 text-center text-gray-700 font-medium"></p>
                </div>

                <!-- Commands Section -->
                <div class="mb-8 p-6 bg-green-50 rounded-lg border border-green-200">
                    <h2 class="text-2xl font-bold text-green-700 mb-4 text-center">Send Commands</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                        <button class="command-button px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700" data-command="MODE_FOLLOWER">
                            Follower Mode ðŸš¶
                        </button>
                        <button class="command-button px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700" data-command="MODE_REMOTE">
                            Remote Control Mode ðŸŽ®
                        </button>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <button class="command-button px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-800 col-start-2" data-command="FORWARD">
                            Forward â¬†ï¸
                        </button>
                        <button class="command-button px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-800" data-command="LEFT">
                            Left â¬…ï¸
                        </button>
                        <button class="command-button px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-800" data-command="STOP">
                            Stop ðŸ›‘
                        </button>
                        <button class="command-button px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-800" data-command="RIGHT">
                            Right âž¡ï¸
                        </button>
                        <button class="command-button px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-800 col-start-2" data-command="BACKWARD">
                            Backward â¬‡ï¸
                        </button>
                    </div>
                </div>

                <!-- Serial Data Display Section -->
                <div class="p-6 bg-gray-800 rounded-lg border border-gray-700">
                    <h2 class="text-2xl font-bold text-gray-200 mb-4 text-center">Received Serial Data</h2>
                    <div class="scroll-container bg-gray-900 rounded-lg p-4">
                        <pre id="receivedData" class="text-sm leading-relaxed whitespace-pre-wrap"></pre>
                    </div>
                    <button id="clearButton" class="mt-4 px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 w-full">
                        Clear Console
                    </button>
                </div>
            </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Controller Modal Specific Styles */
    .controller-modal {
      background: rgba(0, 0, 0, 0.8);
    }
    
    .controller-card {
      width: 95%;
      max-width: 900px;
      max-height: 90vh;
      overflow-y: auto;
      background: var(--surface);
    }

    .controller-content {
      padding: 20px;
      background: #f3f4f6;
    }

    /* Tailwind-like Utilities */
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .gap-4 { gap: 1rem; }
    .w-full { width: 100%; }
    .p-4 { padding: 1rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-8 { margin-bottom: 2rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .bg-white { background-color: white; }
    .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    .text-center { text-align: center; }
    .grid { display: grid; }
    .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .col-start-2 { grid-column-start: 2; }
  </style>

  <script>
    // Add this to your existing JavaScript
    document.addEventListener('DOMContentLoaded', () => {
      // Controller functionality
      const connectButton = document.getElementById('connectButton');
      const disconnectButton = document.getElementById('disconnectButton');
      const statusMessage = document.getElementById('statusMessage');
      const receivedDataDisplay = document.getElementById('receivedData');
      const commandButtons = document.querySelectorAll('.command-button');
      const clearButton = document.getElementById('clearButton');

      // Initialize button states
      function updateConnectionButtons(connected) {
        connectButton.disabled = connected;
        disconnectButton.disabled = !connected;
        commandButtons.forEach(button => button.disabled = !connected);
      }
      updateConnectionButtons(false);

      // Serial connection handling
      connectButton.addEventListener('click', async () => {
        if (!('serial' in navigator)) {
          statusMessage.textContent = 'Web Serial API not supported in this browser';
          return;
        }

        try {
          const port = await navigator.serial.requestPort();
          await port.open({ baudRate: 9600 });
          updateConnectionButtons(true);
          statusMessage.textContent = 'Connected!';
        } catch (error) {
          statusMessage.textContent = `Error: ${error.message}`;
        }
      });

      // Command buttons
      commandButtons.forEach(button => {
        button.addEventListener('click', () => {
          const command = button.dataset.command;
          receivedDataDisplay.textContent += `\nSent command: ${command}`;
          receivedDataDisplay.scrollTop = receivedDataDisplay.scrollHeight;
        });
      });

      // Clear console
      clearButton.addEventListener('click', () => {
        receivedDataDisplay.textContent = '';
      });
    });
  </script>  <!-- =========================== SCRIPT =========================== -->
  <script>
    // ---------- Data: Add/rename kits here ----------
    const KITS = [
      {
        id: '4wd-car',
        title: '4WD Smart Car',
        img: 'images/kit-smart-car.png',
        manual: 'robot-car-manual.html',
        level: 'intermediate',
        tags: ['robotics', 'automation', 'sensors', 'coding'],
        steps: [
          'Assemble 4WD chassis & motors',
          'Install ultrasonic & IR sensors',
          'Set up Arduino control board',
          'Program human follower mode',
          'Configure obstacle avoidance',
          'Test remote control features'
        ]
      },
      {
        id: '4dot-arm',
        title: '4DOT Robotic Arm',
        img: 'images/kit-robot-arm.png',
        manual: 'robotic-arm-manual.html',
        controller: 'robotic-arm-controller.html',
        level: 'advanced',
        tags: ['robotics', 'automation', 'coding', 'servo-control'],
        steps: [
          'Serial Communication Setup',
          '4-DOF Servo Calibration',
          'Real-time Position Control',
          'Preset Position Memory',
          'Interactive Web Dashboard',
          'Joint Range Management'
        ]
      },
      {
        id: 'planzo',
        title: 'PLanzo Smart Planner',
        img: 'images/kit-planzo.png',
        manual: 'planzo-manual.html',
        controller: 'planzo-controller.html',
        extras: 'manuals/planzo-extras.pdf',
        bonusExperiments: 'planzo-bonus-experiments.html',
        level: 'intermediate',
        tags: ['automation', 'sensors', 'coding', 'esp32'],
        steps: [
          'Smart Task Organization System',
          'Gesture-Based Time Control',
          'Customizable Timer Settings', 
          'Web Controller Dashboard',
          'Task Priority Management',
          'Productivity Analytics & Tracking'
        ]
      },
      {
        id: 'pcb-lab',
        title: 'Electronics Learning Lab',
        img: 'images/kit-pcb.png',
        manual: 'electronics-learning-lab-manual.html',
        extras: 'manuals/pcb-experiments.pdf',
        level: 'beginner',
        tags: ['electronics', 'sensors'],
        steps: [
          'Learn basic components',
          'Measure resistance values',
          'Test different sensors',
          'Explore logic gates',
          'Build simple circuits',
          'Troubleshoot connections'
        ]
      }
    ];

    // ---------- Render cards ----------
    const grid = document.getElementById('grid');
    const statKits = document.getElementById('statKits');
    function renderCards(list){
      grid.innerHTML = '';
      list.forEach(k => {
        const el = document.createElement('article');
        el.className = 'card col-4 tilt';
        el.setAttribute('tabindex','0');
        el.setAttribute('role','button');
        el.setAttribute('aria-label', `${k.title} â€” open preview`);
        el.dataset.level = k.level;
        el.dataset.tags = k.tags.join(' ');
        el.dataset.title = k.title.toLowerCase();
        el.innerHTML = `
          <div class="card-media"><img src="${k.img}" alt="${k.title}"></div>
          <div class="card-body">
            <div class="card-title">${k.title}</div>
            <div class="card-tags">
              <span class="tag">${k.level}</span>
              ${k.tags.map(t => `<span class='tag'>${t}</span>`).join('')}
            </div>
            <div class="card-actions">
              <a class="btn primary" href="${k.manual}" target="_blank" rel="noopener" style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.2em">ï¿½</span>
                <span>Manual</span>
              </a>
              ${k.controller ? `
              <a class="btn secondary" href="${k.controller}" target="_blank" rel="noopener" style="display: flex; align-items: center; gap: 0.5rem;">
                <span>ðŸŽ®</span>
                <span>Controller</span>
              </a>
              ` : ''}
              <button class="btn" data-open="${k.id}">Preview</button>
            </div>
          </div>`;
        // open preview on card click (but not on manual link click)
        el.addEventListener('click', (e) => {
          const isLink = e.target.closest('a');
          if(isLink) return; // let link work
          openModal(k);
        });
        el.addEventListener('keyup', (e) => { if(e.key === 'Enter') openModal(k); });
        grid.appendChild(el);
      });
      statKits.textContent = list.length;
    }

    renderCards(KITS);

    // ---------- Search & Filter chips ----------
    const searchInput = document.getElementById('searchInput');
    const chips = document.getElementById('chips');
    let activeFilter = 'all';

    function applyFilter(){
      const q = (searchInput.value || '').toLowerCase().trim();
      const filtered = KITS.filter(k => {
        const matchesText = !q || [k.title, k.level, k.tags.join(' ')].join(' ').toLowerCase().includes(q);
        const matchesChip = activeFilter === 'all' || k.level === activeFilter || k.tags.includes(activeFilter);
        return matchesText && matchesChip;
      });
      renderCards(filtered);
    }

    searchInput.addEventListener('input', applyFilter);
    chips.addEventListener('click', (e) => {
      const btn = e.target.closest('.chip');
      if(!btn) return;
      [...chips.children].forEach(c => c.classList.remove('active'));
      btn.classList.add('active');
      activeFilter = btn.dataset.filter;
      applyFilter();
    });

    // ---------- Modal ----------
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalImg = document.getElementById('modalImg');
    const modalSteps = document.getElementById('modalSteps');
    const modalTags = document.getElementById('modalTags');
    const openManual = document.getElementById('openManual');
    const openExtras = document.getElementById('openExtras');
    const modalClose = document.getElementById('modalClose');

    let currentKit = null;

    function openModal(kit){
      currentKit = kit; // Store current kit reference
      modalTitle.textContent = kit.title;
      modalImg.src = kit.img;
      modalImg.alt = kit.title;
      modalSteps.innerHTML = kit.steps.map(s => `<li>${s}</li>`).join('');
      modalTags.innerHTML = `<span class='tag'>${kit.level}</span>` + kit.tags.map(t => `<span class='tag'>${t}</span>`).join('');
      openManual.href = kit.manual;
      
      // Handle different bonus experiments/extras based on kit
      if (kit.bonusExperiments) {
        openExtras.href = kit.bonusExperiments;
        openExtras.innerHTML = 'ðŸš€ Bonus Experiments';
      } else {
        openExtras.href = kit.extras;
        openExtras.innerHTML = 'ðŸ§ª Bonus Experiments';
      }
      
      // Show controller button for 4WD car and PLanzo
      const openController = document.getElementById('openController');
      if (kit.id === '4wd-car') {
        openController.style.display = 'inline-flex';
        openController.innerHTML = 'ðŸ”Œ Connect to Car';
      } else if (kit.id === 'planzo') {
        openController.style.display = 'inline-flex';
        openController.innerHTML = 'ðŸŽ® Web Controller';
      } else {
        openController.style.display = 'none';
      }
      
      modal.classList.add('open');
    }

    // IP Modal Handler
    const ipModal = document.getElementById('ipModal');
    const ipModalClose = document.getElementById('ipModalClose');
    const openController = document.getElementById('openController');
    const ipInput = document.getElementById('ipAddress');
    const connectBtn = document.getElementById('connectBtn');
    const statusDiv = document.getElementById('connectionStatus');
    const receivedData = document.getElementById('receivedData');
    const clearBtn = document.getElementById('clearBtn');
    let ws = null;

    openController.addEventListener('click', () => {
      modal.classList.remove('open');
      if (currentKit && currentKit.id === '4wd-car') {
        window.open('car-controller-local.html', '_blank');
      } else if (currentKit && currentKit.id === 'planzo') {
        window.open('planzo-controller.html', '_blank');
      }
    });

    ipModalClose.addEventListener('click', () => {
      ipModal.classList.remove('open');
      if (ws) {
        ws.close();
        connectBtn.textContent = 'Connect';
        statusDiv.textContent = 'Disconnected';
        statusDiv.className = 'status-indicator status-disconnected';
      }
    });

    ipModal.addEventListener('click', (e) => {
      if (e.target === ipModal) {
        ipModal.classList.remove('open');
        if (ws) {
          ws.close();
          connectBtn.textContent = 'Connect';
          statusDiv.textContent = 'Disconnected';
          statusDiv.className = 'status-indicator status-disconnected';
        }
      }
    });

    // Connect to WebSocket
    connectBtn.addEventListener('click', () => {
      const ip = ipInput.value;
      
      if (ws) {
        ws.close();
        connectBtn.textContent = 'Connect';
        statusDiv.textContent = 'Disconnected';
        statusDiv.className = 'status-indicator status-disconnected';
        return;
      }

      try {
        // Redirect to the web interface
        window.open(`http://${ip}`, '_blank');
        
        // Also establish WebSocket connection for serial monitor
        ws = new WebSocket(`ws://${ip}/ws`);
        
        ws.onopen = () => {
          statusDiv.textContent = 'Connected';
          statusDiv.className = 'status-indicator status-connected';
          connectBtn.textContent = 'Disconnect';
          logMessage('Connected to WebSocket server');
        };

        ws.onclose = () => {
          statusDiv.textContent = 'Disconnected';
          statusDiv.className = 'status-indicator status-disconnected';
          connectBtn.textContent = 'Connect';
          ws = null;
          logMessage('Disconnected from WebSocket server');
        };

        ws.onmessage = (event) => {
          logMessage(`Received: ${event.data}`);
        };

        ws.onerror = (error) => {
          console.error('WebSocket error:', error);
          statusDiv.textContent = 'Connection error';
          statusDiv.className = 'status-indicator status-error';
          logMessage('WebSocket connection error');
        };
      } catch (error) {
        console.error('Connection error:', error);
        statusDiv.textContent = 'Connection error';
        statusDiv.className = 'status-indicator status-error';
        logMessage(`Connection error: ${error.message}`);
      }
    });

    function logMessage(message) {
      const timestamp = new Date().toLocaleTimeString();
      receivedData.value += `[${timestamp}] ${message}\n`;
      receivedData.scrollTop = receivedData.scrollHeight;
    }

    clearBtn.addEventListener('click', () => {
      receivedData.value = '';
    });

    modalClose.addEventListener('click', () => modal.classList.remove('open'));
    modal.addEventListener('click', (e) => { if(e.target === modal) modal.classList.remove('open'); });
    window.addEventListener('keydown', (e) => { if(e.key === 'Escape') modal.classList.remove('open'); });

    // ---------- Back to top ----------
    const toTop = document.getElementById('toTop');
    toTop.addEventListener('click', () => window.scrollTo({ top:0, behavior:'smooth' }));
    window.addEventListener('scroll', () => {
      if(window.scrollY > 400) toTop.classList.add('show'); else toTop.classList.remove('show');
    });

    // ---------- Theme toggle & palette cycle ----------
    const themeBtn = document.getElementById('themeBtn');
    const paletteBtn = document.getElementById('paletteBtn');
    const THEMES = ['theme-neon','theme-ocean','theme-sunset','theme-forest','theme-rose','theme-mono-dark'];

    // load saved
    const savedMode = localStorage.getItem('mode');
    const savedTheme = localStorage.getItem('theme');
    if(savedMode === 'light') document.body.classList.add('light');
    if(savedTheme){ document.body.classList.add(savedTheme); }

    themeBtn.addEventListener('click', () => {
      document.body.classList.toggle('light');
      localStorage.setItem('mode', document.body.classList.contains('light') ? 'light' : 'dark');
    });

    paletteBtn.addEventListener('click', () => {
      const current = THEMES.find(t => document.body.classList.contains(t)) || THEMES[0];
      const idx = THEMES.indexOf(current);
      document.body.classList.remove(...THEMES);
      const next = THEMES[(idx + 1) % THEMES.length];
      document.body.classList.add(next);
      localStorage.setItem('theme', next);
    });

    // ---------- Year ----------
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===========================
    // KID-FRIENDLY ANIMATIONS & EMAILJS
    // ===========================
    
    // Initialize EmailJS
    emailjs.init("YOUR_PUBLIC_KEY"); // We'll use a demo service
    
    // Create Twinkling Stars
    function createStars() {
      const hero = document.querySelector('.hero');
      for(let i = 0; i < 50; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 3 + 's';
        hero.appendChild(star);
      }
    }

    // Create Floating Particles
    function createParticles() {
      const hero = document.querySelector('.hero');
      for(let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 4 + 's';
        hero.appendChild(particle);
      }
    }

    // Handle Contact Form with EmailJS
    document.getElementById('contactForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const submitBtn = document.getElementById('submitBtn');
      const btnText = document.getElementById('btnText');
      const spinner = document.getElementById('spinner');
      const status = document.getElementById('formStatus');
      
      // Show loading state
      btnText.style.display = 'none';
      spinner.style.display = 'inline';
      submitBtn.disabled = true;
      status.textContent = '';
      
      try {
        // Since we can't set up EmailJS without credentials, we'll simulate the email sending
        // In a real implementation, you would use:
        // await emailjs.sendForm('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', this);
        
        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // For now, we'll show success and log the form data
        const formData = new FormData(this);
        console.log('Form Data:', {
          name: formData.get('user_name'),
          email: formData.get('user_email'),
          message: formData.get('message'),
          timestamp: new Date().toISOString(),
          destination: 'saadkarim754@gmail.com'
        });
        
        status.textContent = 'âœ… Message sent successfully!';
        status.style.color = '#10b981';
        this.reset();
        
        // Add celebration animation
        submitBtn.style.animation = 'bounce 0.6s ease';
        setTimeout(() => {
          submitBtn.style.animation = '';
        }, 600);
        
      } catch (error) {
        console.error('Error sending message:', error);
        status.textContent = 'âŒ Failed to send. Please try again.';
        status.style.color = '#ef4444';
      } finally {
        // Reset button state
        btnText.style.display = 'inline';
        spinner.style.display = 'none';
        submitBtn.disabled = false;
        
        // Clear status after 5 seconds
        setTimeout(() => {
          status.textContent = '';
        }, 5000);
      }
    });

    // Add Magic to Search Input
    const searchInputElement = document.getElementById('searchInput');
    searchInputElement.addEventListener('focus', function() {
      this.parentElement.style.transform = 'scale(1.02)';
      this.parentElement.style.boxShadow = '0 0 20px rgba(139, 92, 246, 0.4)';
    });
    
    searchInput.addEventListener('blur', function() {
      this.parentElement.style.transform = 'scale(1)';
      this.parentElement.style.boxShadow = 'var(--shadow)';
    });

    // Enhanced Card Interactions
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-10px) scale(1.02)';
        this.style.boxShadow = `
          0 20px 50px rgba(0,0,0,.35),
          0 0 20px var(--accent),
          inset 0 1px 0 rgba(255,255,255,0.1)
        `;
      });
      
      card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
        this.style.boxShadow = 'var(--shadow)';
      });
    });

    // Initialize animations when page loads
    document.addEventListener('DOMContentLoaded', function() {
      createStars();
      createParticles();
    });
  </script>
</body>
</html>
